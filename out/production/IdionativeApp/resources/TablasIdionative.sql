CREATE TABLE PALABRAS (
	ID_PALABRA NUMBER(10) NOT NULL,
	ENG VARCHAR2(70),
	ESP VARCHAR2(70),
	JPN VARCHAR2(70),
	KANA VARCHAR2(70),
	DEU VARCHAR2(70),
	PTR VARCHAR2(70),
	CONSTRAINT PALABRAS_PK PRIMARY KEY (ID_PALABRA)
);

CREATE TABLE TIPOS_PALABRAS(
	IDTIPO NUMBER(10) NOT NULL,
	TIPO VARCHAR(10) NOT NULL,
	CONSTRAINT ID_TIPO_FK FOREIGN KEY (ID_TIPO) REFERENCES PALABRAS (ID_PALABRA),
	CONSTRAINT TIPO_CK CHECK (TIPO IN ('N', 'A', 'Adv' ,'V' ,'Pron', 'Prep', 'Art', 'Conj', 'Interj' , 'NaAdj', 'IAdj', 'RV', 'IV', 'VT', 'VI', 'GV' ,'IcV', 'SpV', 'Part', 'Det'))	
);

CREATE TABLE IDIOMAS (
	CODIGO VARCHAR2(3) NOT NULL,
	NOMBRE VARCHAR2(25) NOT NULL,
	PAIS VARCHAR2(20) NOT NULL,
	PALABRA_REFERENCIA NUMBER(10),
	CONSTRAINT IDIOMAS_PK PRIMARY KEY (CODIGO),
	CONSTRAINT PALABRA_REFERENCIA_FK FOREIGN KEY (PALABRA_REFERENCIA) REFERENCES PALABRAS (ID_PALABRA)
);

CREATE TABLE SIGNIFICADO_EJEMPLO (
	ID_SIG NUMBER(10) NOT NULL,
	SIGNIFICADO VARCHAR2(350) NOT NULL,
	EJEMPLO VARCAHR2(200) NOT NULL,
	IDIOMA_SIG VARCHAR2(3) NOT NULL,
	CONSTRAINT ID_SIG_FK FOREIGN KEY (ID_SIG) REFERENCES PALABRAS (ID_PALABRA),
	CONSTRAINT IDIOMA_SIG_FK FOREIGN KEY (IDIOMA_SIG) REFERENCES IDIOMAS (CODIGO),
	CONSTRAINT SIGNIFICADO_PK PRIMARY KEY (ID_SIG, IDIOMA_SIG)
);

CREATE TABLE USUARIOS (
	EMAIL VARCHAR2(35) NOT NULL,
	USUARIO VARCHAR2(25) NOT NULL,
	PASSWD VARCHAR2(25) NOT NULL,
	TIPO VARCHAR2(1) DEFAULT 'E',
	GENERO VARCHAR2(1) DEFAULT 'N',
	NATIVO VARCHAR2(3) NOT NULL,
	CONSTRAINT USUARIOS_PK PRIMARY KEY (EMAIL),
	CONSTRAINT TIPO_USUARIO_CK CHECK (TIPO IN ('A', 'P', 'E')),
	CONSTRAINT GENERO_CK CHECK (GENERO IN ('M', 'H', 'N'))
);

CREATE TABLE HABLA_IDIOMAS (
	USUARIO_HI VARCHAR2(35) NOT NULL,
	IDIOMA_HI VARCHAR2(3) NOT NULL,
	CONSTRAINT USUARIO_HABLA_FK FOREIGN KEY (USUARIO_HI) REFERENCES USUARIOS (EMAIL),
	CONSTRAINT IDIOMA_HABLA_FK FOREIGN KEY (IDIOMA_HI) REFERENCES IDIOMAS (CODIGO),
	CONSTRAINT HABLA_IDIOMA_PK PRIMARY KEY (USUARIO_HI, IDIOMA_HI)
);

CREATE TABLE APRENDE_IDIOMAS (
	USUARIO_AI VARCHAR2(35) NOT NULL,
	IDIOMA_AI VARCHAR2(3) NOT NULL,
	CONSTRAINT USUARIO_APRENDE_FK FOREIGN KEY (USUARIO_AI) REFERENCES USUARIOS (EMAIL),
	CONSTRAINT IDIOMA_APRENDE_FK FOREIGN KEY (IDIOMA_AI) REFERENCES IDIOMAS (CODIGO),
	CONSTRAINT APRENDE_IDIOMAS_PK PRIMARY KEY (USUARIO_AI, IDIOMA_AI)
);

CREATE TABLE CURSOS (
    ID_CURSO NUMBER(10) NOT NULL,
    TITULO_CURSO VARCHAR2(25) NOT NULL,
    CONTENIDO_CURSO VARCHAR2(300) NOT NULL,
    AUTOR_CURSO VARCHAR2(35) NOT NULL,
    IDIOMA_CURSO VARCHAR2(3) NOT NULL,
    IDIOMA_APRENDER VARCHAR2(3) NOT NULL,
    CONSTRAINT AUTOR_CURSO_FK FOREIGN KEY (AUTOR_CURSO) REFERENCES USUARIOS (EMAIL),
    CONSTRAINT IDIOMA_CURSO_FK FOREIGN KEY (IDIOMA_CURSO) REFERENCES IDIOMAS (CODIGO),
    CONSTRAINT IDIOMA_APRENDER_FK FOREIGN KEY (IDIOMA_APRENDER) REFERENCES IDIOMAS (CODIGO),
    CONSTRAINT CURSOS_PK PRIMARY KEY (ID_CURSO, IDIOMA_CURSO)
);

CREATE TABLE LECCIONES (
    ID_LECC NUMBER(10) NOT NULL,
    ID_CURSO_LECC NUMBER(10) NOT NULL,
    TITULO_LECC VARCHAR2(25) NOT NULL,
    CONTENT_LECC VARCHAR2(4000) NOT NULL,
    IDIOMA_LECC VARCHAR2(3) NOT NULL,
    CONSTRAINT CURSO_FK FOREIGN KEY (ID_CURSO_LECC, IDIOMA_LECC) REFERENCES CURSOS (ID_CURSO, IDIOMA_CURSO),
    CONSTRAINT LECCION_PK PRIMARY KEY (ID_LECC, ID_CURSO_LECC, IDIOMA_LECC)
);